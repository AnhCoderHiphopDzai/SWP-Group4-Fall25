<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.1" xmlns="http://xmlns.jcp.org/xml/ns/javaee">
    
    <!-- USER PROFILE & ACCOUNT MANAGEMENT -->
    
    <!-- Customer profile management -->
    <servlet>
        <servlet-name>CustomerProfileServlet</servlet-name>
        <servlet-class>controller.CustomerProfileServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>CustomerProfileServlet</servlet-name>
        <url-pattern>/CustomerProfile</url-pattern>
    </servlet-mapping>
    
    <!-- Change password functionality -->
    <servlet>
        <servlet-name>ChangePasswordServlet</servlet-name>
        <servlet-class>controller.ChangePasswordServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ChangePasswordServlet</servlet-name>
        <url-pattern>/ChangePassword</url-pattern>
    </servlet-mapping>
    
    <!-- User logout -->
    <servlet>
        <servlet-name>LogoutServlet</servlet-name>
        <servlet-class>controller.LogoutServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>LogoutServlet</servlet-name>
        <url-pattern>/logout</url-pattern>
    </servlet-mapping>
    
    <!-- FOOD & COMBO MANAGEMENT -->
    
    <!-- Food management -->
    <servlet>
        <servlet-name>FoodManagementServlet</servlet-name>
        <servlet-class>controller.FoodManagementServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>FoodManagementServlet</servlet-name>
        <url-pattern>/food-management</url-pattern>
    </servlet-mapping>
    
    <!-- Combo management -->
    <servlet>
        <servlet-name>ComboManagementServlet</servlet-name>
        <servlet-class>controller.ComboManagementServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ComboManagementServlet</servlet-name>
        <url-pattern>/combo-management</url-pattern>
    </servlet-mapping>
    
    <!-- ComboFood relationships -->
    <servlet>
        <servlet-name>ComboFoodManagementServlet</servlet-name>
        <servlet-class>controller.ComboFoodManagementServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ComboFoodManagementServlet</servlet-name>
        <url-pattern>/combo-food-management</url-pattern>
    </servlet-mapping>
    
    <!-- AUTHENTICATION & EMAIL VERIFICATION -->
    
    <!-- Main authentication controller -->
    <servlet>
        <servlet-name>AuthController</servlet-name>
        <servlet-class>controller.AuthController</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>AuthController</servlet-name>
        <url-pattern>/auth/*</url-pattern>
    </servlet-mapping>
    
    <!-- Google OAuth authentication -->
    <servlet>
        <servlet-name>GoogleAuthController</servlet-name>
        <servlet-class>controller.GoogleAuthController</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>GoogleAuthController</servlet-name>
        <url-pattern>/auth/google</url-pattern>
    </servlet-mapping>
    
    <!-- Google OAuth callback -->
    <servlet>
        <servlet-name>GoogleAuthCallbackServlet</servlet-name>
        <servlet-class>controller.GoogleAuthCallbackController</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>GoogleAuthCallbackServlet</servlet-name>
        <url-pattern>/GoogleAuthCallback</url-pattern>
    </servlet-mapping>
    
    <!-- Email verification -->
    <servlet>
        <servlet-name>VerifyEmailServlet</servlet-name>
        <servlet-class>controller.VerifyEmailServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>VerifyEmailServlet</servlet-name>
        <url-pattern>/VerifyEmail</url-pattern>
    </servlet-mapping>
    
    <!-- GUEST MOVIE BROWSING -->
    
    <!-- Guest movie list -->
    <servlet>
        <servlet-name>GuestMovieListServlet</servlet-name>
        <servlet-class>controller.GuestMovieListServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>GuestMovieListServlet</servlet-name>
        <url-pattern>/guest-movies</url-pattern>
    </servlet-mapping>
    
    <!-- Guest movie detail -->
    <servlet>
        <servlet-name>GuestMovieDetailServlet</servlet-name>
        <servlet-class>controller.GuestMovieDetailServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>GuestMovieDetailServlet</servlet-name>
        <url-pattern>/guest-movie-detail</url-pattern>
    </servlet-mapping>
    
    <!-- BOOKING SYSTEM -->
    
    <!-- Test servlet for booking system -->
    <servlet>
        <servlet-name>BookingTestServlet</servlet-name>
        <servlet-class>controller.BookingTestServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>BookingTestServlet</servlet-name>
        <url-pattern>/booking/test</url-pattern>
    </servlet-mapping>
    
    <!-- Step 1: Select screening -->
    <servlet>
        <servlet-name>BookingSelectScreeningServlet</servlet-name>
        <servlet-class>controller.BookingSelectScreeningServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>BookingSelectScreeningServlet</servlet-name>
        <url-pattern>/booking/select-screening</url-pattern>
    </servlet-mapping>
    
    <!-- Step 2: Select seats -->
    <servlet>
        <servlet-name>BookingSeatSelectionServlet</servlet-name>
        <servlet-class>controller.BookingSeatSelectionServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>BookingSeatSelectionServlet</servlet-name>
        <url-pattern>/booking/select-seats</url-pattern>
    </servlet-mapping>
    
    <!-- Step 3: Select food (optional) -->
    <servlet>
        <servlet-name>BookingFoodSelectionServlet</servlet-name>
        <servlet-class>controller.BookingFoodSelectionServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>BookingFoodSelectionServlet</servlet-name>
        <url-pattern>/booking/select-food</url-pattern>
    </servlet-mapping>
    
    <!-- Step 4: Payment -->
    <servlet>
        <servlet-name>BookingPaymentServlet</servlet-name>
        <servlet-class>controller.BookingPaymentServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>BookingPaymentServlet</servlet-name>
        <url-pattern>/booking/payment</url-pattern>
    </servlet-mapping>
    
    <!-- VNPay callback -->
    <servlet>
        <servlet-name>VNPayCallbackServlet</servlet-name>
        <servlet-class>controller.VNPayCallbackServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>VNPayCallbackServlet</servlet-name>
        <url-pattern>/vnpay-callback</url-pattern>
    </servlet-mapping>
    
    <!-- VNPay IPN (Instant Payment Notification) -->
    <servlet>
        <servlet-name>VNPayIPNServlet</servlet-name>
        <servlet-class>controller.VNPayIPNServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>VNPayIPNServlet</servlet-name>
        <url-pattern>/vnpay-ipn</url-pattern>
    </servlet-mapping>
    
    <!-- SESSION CONFIGURATION -->
    
    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>
</web-app>
